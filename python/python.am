# TODO Have a editable version of this

python-install:
	pip install --prefix=@prefix@ $(srcdir)/@srcpython@

INSTALL_EXEC_HOOK+= python-install

python-check:
	source $(prefix)/setup_ecostress.sh && pytest -n 10 $(srcdir)/@srcpython@/tests

INSTALLCHECK_HOOK+= python-check

# Make sure we don't have any pyc or pycache files floating around
DIST_HOOK += dist-clean-up-python

dist-clean-up-python:
	rm -rf `find $(distdir) -name '__pycache__'`
	rm -f `find $(distdir) -name '*.pyc'`
